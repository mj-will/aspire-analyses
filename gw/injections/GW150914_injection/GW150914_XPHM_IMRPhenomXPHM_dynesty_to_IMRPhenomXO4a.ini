label = GW150914_IMRPhenomXPHM_dynesty_to_IMRPhenomXO4a
outdir = outdir_GW150914_XPHM_injection_IMRPhenomXPHM_dynesty_to_IMRPhenomXO4a_Exp1

detectors = [H1, L1, V1]
duration = 8

trigger-time = 1364342674.0
data-dict = {H1:../../data/frame_files_v4/GW150914_XPHM_data/injection_0_H1_1364342474_1364346570.hdf5, L1:../../data/frame_files_v4/GW150914_XPHM_data/injection_0_L1_1364342474_1364346570.hdf5, V1:../../data/frame_files_v4/GW150914_XPHM_data/injection_0_V1_1364342474_1364346570.hdf5}
channel-dict = {H1:MockData, L1:MockData, V1:MockData}

psd-dict={H1:psds/aligo_O3actual_H1_psd.txt, L1:psds/aligo_O3actual_L1_psd.txt, V1:psds/avirgo_O3actual_psd.txt}

waveform-approximant=IMRPhenomXO4a

prior-dict = {
    mass_ratio = bilby.gw.prior.Uniform(name='mass_ratio', minimum=0.125, maximum=1)
    chirp_mass = bilby.gw.prior.Uniform(name='chirp_mass', minimum=25, maximum=35)
    luminosity_distance = bilby.gw.prior.UniformSourceFrame(name='luminosity_distance', minimum=1e2, maximum=2000)
    dec = Cosine(name='dec')
    ra = Uniform(name='ra', minimum=0, maximum=2 * np.pi, boundary='periodic')
    theta_jn = Sine(name='theta_jn')
    psi = Uniform(name='psi', minimum=0, maximum=np.pi, boundary='periodic')
    delta_phase = Uniform(name='delta_phase', minimum=0, maximum=2 * np.pi, boundary='periodic')
    a_1 = Uniform(name='a_1', minimum=0, maximum=0.99)
    a_2 = Uniform(name='a_2', minimum=0, maximum=0.99)
    tilt_1 = Sine(name='tilt_1')
    tilt_2 = Sine(name='tilt_2')
    phi_12 = Uniform(name='phi_12', minimum=0, maximum=2 * np.pi, boundary='periodic')
    phi_jl = Uniform(name='phi_jl', minimum=0, maximum=2 * np.pi, boundary='periodic')
}

phase-marginalization = False
distance-marginalization = True
time-marginalization = True

sampler = aspire
sampler-kwargs = {
    'plot': True,
    'n_samples': 1000,
    'n_final_samples': 10000,
    'sample_from_prior': ["time_jitter", "delta_phase", "psi"],
    'transforms': 4,
    'hidden_features': [32, 32],
    'fit_kwargs': {'n_epochs': 100},
    'sample_kwargs': {'sampler': "minipcn_smc", 'adaptive': True, 'target_efficiency': [0.5, 0.8], 'sampler_kwargs': {'n_steps': 500}},
    'initial_conversion_function': 'aspire_analysis_tools.gw.conversion.generate_all_bbh_parameters',
    'initial_result_file': '/users/mjwill/git_repos/aspire-analyses/gw/injections/GW150914_injection/outdir_GW150914_XPHM_injection_IMRPhenomXPHM_dynesty/final_result/GW150914_IMRPhenomXPHM_dynesty_data0_1364342674-0_analysis_H1L1V1_result.hdf5'
}


request-cpus = 16
request-memory = 8

conda-env = aspire
scheduler = slurm
scheduler-args = partition=sciama3.q,sciama3-5.q,sciama4.q,sciama5-5.q,hicpu.q
scheduler-module = system anaconda3
scheduler-analysis-time = 1-00:00:00
